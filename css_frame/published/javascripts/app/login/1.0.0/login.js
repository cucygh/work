/*! application-name 2014-09-23 */
!function(a){var b=a.jQuery,c=a.Q||{};c.pages=c.pages||{},c.pages.login=function(){var a=b(".modal[data-login]");a.on("click",".close",function(a){a.preventDefault();var c=b(this);c.parents(".modal[data-login]").modal("hide")}),a.on("keyup blur","#login_name,#login_pwd",function(a){var c=b(this);""!=c.val()&&c.parents(".control-group").find(".ms-tishi").html(""),"blur"==a.type&&c.parents(".control-group").find(".ms-tishi").html(""!=c.val()?"":'<i class="icon-remove"></i>用户名不能为空')}),a.on("click",".ms-denglu",function(a){a.preventDefault();var d=b(this),e=b("#login_name"),f=b("#login_pwd"),g={name:e.val(),pwd:f.val()};return""==g.name?(e.parents(".control-group").find(".ms-tishi").html('<i class="icon-remove"></i>用户名不能为空'),!1):(e.parents(".control-group").find(".ms-tishi").html(""),""==g.pwd?(f.parents(".control-group").find(".ms-tishi").html('<i class="icon-remove"></i>密码不能为空'),!1):(f.parents(".control-group").find(".ms-tishi").html(""),g.pwd=c.md5.run(g.pwd),void c.ajax.post(c.ajax.config.user_login,g,function(a){"0"==a.status?(c.cookie.set({name:"syyGUID",value:a.cookie,expire:a.expire}),d.parents(".modal[data-login]").modal("hide")):f.parents(".control-group").find(".ms-tishi").html('<i class="icon-remove"></i>'+a.error)},function(a){alert("登录失败"),console.log(a)})))})},b(function(){c.pages.login()})}(window);