/*! application-name 2014-09-23 */
!function(a){var b=a.jQuery,c=a.Q||{};c.pages=c.pages||{},c.pages.save=function(a,d){var e=c.store.get(a);e?(e=e.split(";"),e.push(d),e=b.unique(e).join(";")):e=d,c.store.set(a,e)},c.pages.get=function(a){var d=c.store.get(a);if(d){d=d.split(";");for(var e=0,f=d.length;f>e;e++)d[e]="<option>"+d[e]+"</option>";b("#"+a).html(d.join(""))}else b("#"+a).html("")},c.pages.event=function(){var a=b(".body");a.on("click",".run",function(){var a,d=b("#server").val().replace(/\/+$/g,""),e=b("#api").val();if(!/^\/[a-z0-9A-Z]+/g.test(e))return alert("接口地址不合法"),!1;a=/^[http:\/\/|https:\/\/|\/]/g.test(d)?d+e:e;var f=b("#param").val();try{f=JSON.parse(f)}catch(g){return alert("参数格式错误，必须为严谨的JSON格式，即key和value都使用英文双引号"),!1}c.ajax.post(a,f,function(a){d&&c.pages.save("his-server",d),e&&c.pages.save("his-api",e),f&&c.pages.save("his-param-name",JSON.stringify(f)),b("#res-param").val(JSON.stringify(a)),c.pages.get("his-api"),c.pages.get("his-server"),c.pages.get("his-param-name")},function(){alert("网络错误")})}),a.on("click","#his-server",function(){var a=b(this).val();a&&b("#server").val(a)}),a.on("click","#his-api",function(){var a=b(this).val();a&&b("#api").val(a)}),a.on("click","#his-param-name",function(){var a=b(this).val();a&&b("#param").val(a)}),a.on("click",".clear-all",function(){c.store.clear(),c.pages.get("his-api"),c.pages.get("his-server")}),a.on("click",".format",function(){Process(),b("#json-formated").show()}),a.on("click",".start-upload",function(){b("#file_upload").uploadify("upload")}),b("#file_upload").uploadify({swf:"javascripts/gallery/upload/1.0.0/uploadify.swf",uploader:"/work/upload.do",auto:!1,buttonText:"上传文件",formData:{name:"第一次心",time:"2014-09-19"}})},b(function(){c.pages.event(),c.pages.get("his-server"),c.pages.get("his-api"),c.pages.get("his-param-name")})}(window);