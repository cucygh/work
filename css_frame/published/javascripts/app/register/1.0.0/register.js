/*! application-name 2014-09-23 */
!function(a){var b=a.jQuery,c=a.Q||{};c.pages=c.pages||{},c.pages.form_check=function(){var a,c=!0;return b("#form-rigister :text,#form-rigister :password").each(function(d,e){return a=b(e),""==a.val()||a.parents(".control-group").hasClass("error")?(c=!1,!1):void 0}),c},c.pages.event=function(){var a=b(".form-register");a.on("blur","#set_user",function(){var a=b(this),d=b.trim(a.val());""!=d?(a.siblings("span").html(""),a.parents(".control-group").removeClass("error"),c.ajax.post(c.ajax.config.user_check,{UserName:d},function(b){"1"==b.returncode?(a.siblings("span").html('<i class="icon-remove"></i> 用户名已被占用！'),a.parents(".control-group").addClass("error")):(a.siblings("span").html('<i class="icon-add"></i> 用户名已被占用！'),a.parents(".control-group").removeClass("error"))},function(){a.siblings("span").html('<i class="icon-remove"></i> 网络错误！'),a.parents(".control-group").addClass("error")})):(a.siblings("span").html('<i class="icon-remove"></i> 用户名不能为空！'),a.parents(".control-group").addClass("error"))}),a.on("keyup","#set_pwd",function(){var a=b(this),d=a.val(),e=b(".pwd-level");if(e.removeClass("btn-success btn-warning btn-danger btn-info"),d){var f=c.pwd.level(d);a.parents(".control-group").removeClass("error"),a.siblings("span").html(""),10>f?e.filter(":lt(1)").addClass("btn-danger"):20>f?e.filter(":lt(2)").addClass("btn-warning"):25>f?e.filter(":lt(3)").addClass("btn-info"):e.filter(":lt(4)").addClass("btn-success")}else a.siblings("span").html('<i class="icon-remove"></i> 密码不能为空！'),a.parents(".control-group").addClass("error")}),a.on("keyup","#repeat_pwd",function(){var a=b("#set_pwd").val(),c=b(this),d=c.val();a!=d?(c.siblings("span").html('<i class="icon-remove"></i> 两处密码不一致！'),c.parents(".control-group").addClass("error")):(c.parents(".control-group").removeClass("error"),c.siblings("span").html(""))}),a.on("keyup","#set_mobile",function(){var a=b(this),d=a.val();c.reg.mobile(d)?(a.parents(".control-group").removeClass("error"),a.siblings("span").html("")):(a.siblings("span").html('<i class="icon-remove"></i> 请输入有效的手机号！'),a.parents(".control-group").addClass("error"))}),a.on("keyup","#set_email",function(){var a=b(this),d=a.val();c.reg.email(d)?(a.parents(".control-group").removeClass("error"),a.siblings("span").html("")):(a.siblings("span").html('<i class="icon-remove"></i> 请输入有效的邮箱！'),a.parents(".control-group").addClass("error"))}),a.on("keyup","#set_identity",function(){var a=b(this),d=a.val(),e=b("#credential :selected").attr("val");c.reg[e](d)?(a.parents(".control-group").removeClass("error"),a.siblings("span").html("")):(a.siblings("span").html('<i class="icon-remove"></i> 请输入有效的证件号码！'),a.parents(".control-group").addClass("error"))}),a.on("change",":radio[name=identity]",function(){var a=b(this),c=a.parents(".controls").find(":checked");b("#credential option").prop("disabled",!0).filter("[val="+c.val()+"]").prop("disabled",!1).prop("selected",!0)}),a.on("click","#run",function(d){d.preventDefault(),a=b("#form-rigister");var e,f=c.pages.form_check();f&&(e=b("#set_pwd"),e.val(c.md5.run(e.val())),e=b("#repeat_pwd"),e.val(c.md5.run(e.val()))),c.pages.form_check()&&(a.get(0).submit(),setTimeout(function(){b("#set_pwd").val(""),b("#repeat_pwd").val("")},500))})},b(function(){c.pages.event()})}(window);